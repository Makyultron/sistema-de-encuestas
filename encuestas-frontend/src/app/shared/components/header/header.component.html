<mat-toolbar color="primary" class="header-toolbar">
  <div class="toolbar-content">
    <!-- Logo and Title -->
    <div class="logo-section" (click)="navigateTo('/dashboard')" style="cursor: pointer;">
      <mat-icon class="logo-icon">poll</mat-icon>
      <span class="app-title">Sistema de Encuestas</span>
    </div>

    <!-- Navigation Menu (for authenticated users) -->
    <div class="nav-menu" *ngIf="isAuthenticated()">
      <button mat-button routerLink="/dashboard" routerLinkActive="active-link">
        <mat-icon>dashboard</mat-icon>
        Dashboard
      </button>
      <button mat-button routerLink="/surveys" routerLinkActive="active-link">
        <mat-icon>list</mat-icon>
        Mis Encuestas
      </button>
      <button mat-button routerLink="/surveys/create" routerLinkActive="active-link">
        <mat-icon>add</mat-icon>
        Crear Encuesta
      </button>
    </div>

    <!-- Right side actions -->
    <div class="header-actions">
      <!-- Theme Toggle -->
      <app-theme-toggle></app-theme-toggle>

      <!-- User Menu (for authenticated users) -->
      <div *ngIf="isAuthenticated(); else authButtons" class="user-menu">
        <button mat-icon-button [matMenuTriggerFor]="userMenu">
          <mat-icon>account_circle</mat-icon>
        </button>
        <mat-menu #userMenu="matMenu">
          <div class="user-info" mat-menu-item disabled>
            <div class="user-details" *ngIf="currentUser$ | async as user">
              <span class="user-name">{{ user.name }}</span>
              <span class="user-email">{{ user.email }}</span>
            </div>
          </div>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            Cerrar Sesión
          </button>
        </mat-menu>
      </div>

      <!-- Auth Buttons (for non-authenticated users) -->
      <ng-template #authButtons>
        <button mat-button routerLink="/login">
          <mat-icon>login</mat-icon>
          Iniciar Sesión
        </button>
        <button mat-raised-button color="accent" routerLink="/register">
          Registrarse
        </button>
      </ng-template>
    </div>
  </div>
</mat-toolbar>
